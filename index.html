<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ø®ØªØ¨Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠ | Ø£. Ø¥ÙŠÙ‡Ø§Ø¨ Ø£Ø´Ø±Ù</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

body{
  margin:0;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  font-family:'Cairo',sans-serif;
  color:#fff;
}

.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}

h1{text-align:center;}

textarea{
  width:100%;
  height:260px;
  border-radius:16px;
  border:none;
  padding:15px;
  font-size:16px;
  margin-bottom:15px;
}

button{
  padding:14px 20px;
  border:none;
  border-radius:16px;
  font-size:16px;
  background:#ffd369;
  cursor:pointer;
  transition:.3s;
}

button:hover{
  background:#ffbe33;
}

/* Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨ÙŠØ¶Ø§ÙˆÙŠ Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø¯Ø§ÙƒÙ† Ø§Ù„Ù…ØªØ¯Ø±Ø¬ */
.quiz-box{
  margin-top:25px;
  background:linear-gradient(135deg,#1a2a6c,#0f2027); /* Ø£Ø²Ø±Ù‚ Ø¯Ø§ÙƒÙ† Ù…ØªØ¯Ø±Ø¬ */
  padding:25px;
  border-radius:30px; /* Ø²ÙˆØ§ÙŠØ§ Ø¨ÙŠØ¶Ø§ÙˆÙŠØ© ÙƒØ¨ÙŠØ±Ø© */
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}

#question{
  font-size:20px;
  margin-bottom:20px;
}

.option{
  background:rgba(255,255,255,0.15);
  padding:14px;
  border-radius:20px; /* Ø®ÙŠØ§Ø±Ø§Øª Ø¨ÙŠØ¶Ø§ÙˆÙŠØ© */
  margin:10px 0;
  cursor:pointer;
  transition:.3s;
}

.option.selected{
  background:#ffd369;
  color:#000;
}

.controls{
  display:flex;
  justify-content:space-between;
  gap:10px;
  margin-top:20px;
  flex-wrap:wrap;
}

.hidden{display:none;}
</style>
</head>

<body>

<div class="container">

<h1>ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠ</h1>

<textarea id="input" placeholder="Ø§Ù„ØµÙ‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ù†Ø§"></textarea>

<button onclick="startQuiz()">Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ğŸš€</button>

<div id="quiz" class="quiz-box hidden">

  <!-- Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø¯Ø§ÙƒÙ† Ø§Ù„Ù…ØªØ¯Ø±Ø¬ -->
  <div id="captureArea">
    <div id="question"></div>
    <div id="options"></div>
  </div>

  <div class="controls">
    <button onclick="screenshotQuestion()">ğŸ“· Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª Ø§Ù„Ø³Ø¤Ø§Ù„</button>
    <button onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
  </div>
</div>

</div>

<!-- Ù…ÙƒØªØ¨Ø© ØªØ­ÙˆÙŠÙ„ HTML Ù„ØµÙˆØ±Ø© -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
let questions = [];
let current = 0;

function startQuiz(){
  const text = document.getElementById("input").value.trim();
  const blocks = text.split("\n\n");
  questions = [];
  current = 0;

  blocks.forEach(block=>{
    const lines = block.split("\n");
    if(lines.length >= 6){
      questions.push({
        q: lines[0].replace("Ø³:","").trim(),
        options: lines.slice(1,5).map(l=>l.slice(3).trim()),
        answer: lines[5].split(":")[1].trim()
      });
    }
  });

  if(!questions.length){
    alert("ØªØ£ÙƒØ¯ Ù…Ù† ØµÙŠØºØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©");
    return;
  }

  document.getElementById("quiz").classList.remove("hidden");
  showQuestion();
}

function showQuestion(){
  const q = questions[current];
  document.getElementById("question").innerText =
    `(${current+1}/${questions.length}) ${q.q}`;

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  q.options.forEach((opt)=>{
    const div = document.createElement("div");
    div.className = "option";
    div.innerText = opt;
    div.onclick = ()=>{
      document.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));
      div.classList.add('selected');
    };
    optionsDiv.appendChild(div);
  });
}

function nextQuestion(){
  current++;
  if(current < questions.length){
    showQuestion();
  }else{
    alert("ğŸ‰ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±");
    document.getElementById("quiz").classList.add("hidden");
  }
}

// Ø²Ø± Ø§Ù„Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª Ù„Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø¯Ø§ÙƒÙ†
function screenshotQuestion(){
  const element = document.getElementById("captureArea");
  html2canvas(element, {
    backgroundColor:null, // ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ gradient
    scale:2,
    useCORS:true
  }).then(canvas=>{
    const image = canvas.toDataURL("image/png");
    // ÙØªØ­ Ø§Ù„Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
    const newTab = window.open();
    newTab.document.write('<img src="' + image + '" style="width:100%">');
  });
}
</script>

</body>
</html>
